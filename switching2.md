# スイッチング電源

---

## 1. はじめに

スイッチング電源（DC-DCコンバータ）は、高効率・小型化・高出力密度を実現できる電源方式として広く利用されています。

近年の電源ICでは、単純なPWM制御に加えて以下の機能が統合されています。

- F-PWM（Forced PWM）
- PFM（Pulse Frequency Modulation）
- PWM / PFM自動切換え
- 電圧フィードバック制御
- 電流フィードバック（電流モード制御）

本記事では、これらを統合した高機能スイッチング電源の理論と設計ポイントを体系的に解説します。

---

# 2. 降圧コンバータの基本式

理想的な降圧コンバータの基本関係式は

$$
V_{out} = D \cdot V_{in}
$$

です。

ここで

- ${V_{in}}$ ：入力電圧  
- ${V_{out}}$ ：出力電圧  
- ${D}$ ：デューティ比  

となります。

---

# 3. PWM制御

## 3.1 動作原理

PWM（Pulse Width Modulation）は

- スイッチング周波数一定
- デューティ比可変

の制御方式です。

誤差アンプ出力 ${V_{err}}$ とランプ波 ${V_{ramp}}$ を比較します。

動作条件：

${V_{err} > V_{ramp}}$ → スイッチON  
${V_{err} < V_{ramp}}$ → スイッチOFF  

---

## 3.2 スイッチング損失

スイッチング損失は概略的に

$$
P_{sw} \propto f_{sw}
$$

となります。

軽負荷時には導通損よりもスイッチング損失が支配的になります。

---

# 4. PFM制御

## 4.1 基本動作

PFMでは

- デューティ比ほぼ一定
- 周波数可変

となります。

軽負荷時に ${f_{sw}}$ を下げることで

$$
P_{sw} \downarrow
$$

となり効率が向上します。

---

## 4.2 特徴

メリット：

- 軽負荷効率が高い  

デメリット：

- 周波数が可変  
- 可聴帯域ノイズ発生の可能性  
- 出力リップル増大  

---

# 5. F-PWM（Forced PWM）

F-PWMは軽負荷時でも強制的にPWM動作を維持します。

特徴：

- ${f_{sw}}$ 一定  
- EMI設計が容易  
- 出力リップル安定  

ノイズ重視用途で有効です。

---

# 6. PWM / PFM自動切換え制御

## 6.1 切換え条件

一般的なロジック：

${I_{load} < I_{th}}$ → PFM  
${I_{load} \ge I_{th}}$ → PWM  

ヒステリシスを設ける場合：

${I_{load} < I_{th1}}$ → PFM  
${I_{load} > I_{th2}}$ → PWM  

ここで ${I_{th2} > I_{th1}}$ とします。

---

# 7. 電圧フィードバック制御

出力電圧を分圧し、基準電圧 ${V_{ref}}$ と比較します。

誤差電圧は

$$
V_{err} = V_{ref} - V_{fb}
$$

です。

---

## 7.1 Buckの小信号伝達関数

LCフィルタを含む制御対象の概略伝達関数は

$$
G_{vd}(s) =
\frac{V_{in}}
{L C s^2 + R C s + 1}
$$

となり、2次系です。

LC フィルタや制御回路の遅れにより位相遅れが蓄積すると、  
位相余裕は減少し、−180°に近づく。  
このとき負帰還は正帰還として作用し、制御系は発振しやすくなる(不安定になりやすい)。  
誤差増幅器や PWM 生成、サンプリングによる制御遅れは  
この位相遅れを増加させる要因である。  

---

## 7.2 LC共振周波数

$$
\omega_0 = \frac{1}{\sqrt{L C}}
$$

$$
f_0 = \frac{1}{2\pi \sqrt{L C}}
$$

補償設計では ${f_0}$ 付近の位相遅れに注意が必要です。

---

# 8. 電流モード制御

## 8.1 二重ループ構造

外側：電圧ループ  
内側：電流ループ  

電流ループにより制御対象は1次系に近づきます。

---

## 8.2 サブハーモニック振動

スイッチング周期の 1/2 周期（またはその分数）で電流が交互に揺れる不安定現象です。  
サブハーモニック(分周振動)と呼ばれます。

起きている現象
- ある周期で少し電流が大きくなる  
- 次の周期では逆に小さくなる  
- それを 1周期おきに繰り返す  

特に ピーク電流モード制御＋デューティ比 50% 超で起こりやすいです。

対策としてスロープ補償を加えます。

---

## 8.3 スロープ補償

この不安定性を防ぐため、電流検出信号に人工的な傾きを加える手法がスロープ補償。  
スロープ補償により、前周期の電流誤差は次周期で確実に減衰し、電流ループは安定化される。  

補償前  
　比較しているのは「純粋なインダクタ電流」  
　誤差が周期をまたいで増幅  

補償後  
　電流信号に 右肩上がりの直線を加える  
　誤差が毎周期減る
　前周期の誤差が減衰  
　「電流が増えすぎたら、より早く OFF される」ように仕向ける   

---

## 8.4 スロープ補償条件

人工ランプ傾き ${m_a}$ は

$$
m_a \ge \frac{m_2 - m_1}{2}
$$

を満たすよう設計します。

ここで

- ${m_1}$ ：ON期間の電流傾き  
- ${m_2}$ ：OFF期間の電流傾き  

です。

---

# 9. 安定性設計の目安

- 位相余裕：45〜60度  
- クロスオーバ周波数： ${f_{sw}/10}$ 以下  

---

# 10. まとめ

高性能スイッチング電源設計には

- PWMとPFMの理解  
- 自動切換えロジック設計  
- 電圧フィードバックによる精密制御  
- 電流モード制御による高速応答  
- 適切な補償設計  

が不可欠です。

理論と実装の両面を理解することで、安定・高効率・低ノイズな電源設計が可能になります。

[ホームに戻る](index.md)

[スイッチング電源1](switching1.md)
